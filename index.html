<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>African Stock Analysis Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 min-h-screen">
    <div id="app" class="container mx-auto p-4 max-w-7xl"></div>

    <script>
        const BACKEND_URL = 'https://stock-backend-api-obux.onrender.com';
        
        let stocks = [];
        let loading = false;

        async function fetchStocks() {
            loading = true;
            render();
            
            try {
                const response = await fetch(`${BACKEND_URL}/api/stocks`);
                const data = await response.json();
                
                if (data.success) {
                    stocks = data.data;
                    console.log(`‚úÖ Loaded ${stocks.length} stocks from ${BACKEND_URL}`);
                }
            } catch (error) {
                console.error('Error:', error);
                alert('Backend error! Check console. URL: ' + BACKEND_URL);
            }
            
            loading = false;
            render();
        }

        function render() {
            const app = document.getElementById('app');
            
            app.innerHTML = `
                <div class="bg-white/10 backdrop-blur-lg rounded-2xl shadow-2xl p-6 mb-6 border border-white/20">
                    <div class="flex flex-col md:flex-row items-start md:items-center justify-between gap-4 mb-4">
                        <div>
                            <h1 class="text-4xl font-bold text-white mb-2">üöÄ African Stock Platform</h1>
                            <p class="text-blue-200">Real-time Market Data ‚Ä¢ AI-Powered Analysis</p>
                        </div>
                        <button 
                            onclick="fetchStocks()"
                            ${loading ? 'disabled' : ''}
                            class="px-6 py-3 bg-gradient-to-r from-emerald-500 to-blue-500 text-white rounded-xl hover:from-emerald-600 hover:to-blue-600 transition disabled:opacity-50 font-semibold shadow-lg whitespace-nowrap"
                        >
                            ${loading ? '‚è≥ Loading...' : 'üîÑ Refresh Data'}
                        </button>
                    </div>
                    <div class="flex items-center gap-2">
                        <div class="w-3 h-3 bg-emerald-400 rounded-full animate-pulse"></div>
                        <p class="text-sm text-emerald-300">Backend Online ‚Ä¢ ${stocks.length} stocks loaded</p>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    ${stocks.length === 0 ? `
                        <div class="col-span-full bg-white/10 backdrop-blur-lg rounded-2xl p-12 text-center border border-white/20">
                            <div class="text-6xl mb-4">üìä</div>
                            <p class="text-white text-xl mb-2">${loading ? 'Loading stocks from African markets...' : 'Click "Refresh Data" to load live stock prices'}</p>
                            <p class="text-blue-300 text-sm mt-2">Backend: ${BACKEND_URL}</p>
                        </div>
                    ` : stocks.map(stock => {
                        const isPositive = parseFloat(stock.changePercent) >= 0;
                        const isStrongBuy = parseFloat(stock.changePercent) > 2;
                        const isStrongSell = parseFloat(stock.changePercent) < -2;
                        
                        return `
                        <div class="bg-white/10 backdrop-blur-lg rounded-2xl shadow-2xl p-6 border border-white/20 hover:bg-white/15 transition transform hover:scale-105 duration-300">
                            <div class="flex items-start justify-between mb-4">
                                <div>
                                    <h3 class="text-2xl font-bold text-white">${stock.symbol}</h3>
                                    <p class="text-sm text-blue-300 uppercase font-semibold">${stock.market} üåç</p>
                                    <p class="text-xs text-gray-400 mt-1">${stock.name || stock.symbol}</p>
                                </div>
                                <div class="text-right">
                                    <span class="px-3 py-1 rounded-lg text-xs font-bold border-2 ${
                                        isStrongBuy ? 'bg-emerald-500 text-white border-emerald-400' :
                                        isStrongSell ? 'bg-red-500 text-white border-red-400' :
                                        isPositive ? 'bg-green-500/30 text-green-300 border-green-500' :
                                        'bg-red-500/30 text-red-300 border-red-500'
                                    }">
                                        ${isStrongBuy ? 'üöÄ STRONG BUY' :
                                          isStrongSell ? '‚ö†Ô∏è SELL' :
                                          isPositive ? 'üìà BUY' : 'üìâ HOLD'}
                                    </span>
                                    ${isStrongBuy ? `
                                        <div class="mt-1 text-xs text-emerald-300 font-semibold">+${stock.changePercent}%</div>
                                    ` : ''}
                                </div>
                            </div>

                            <div class="mb-4">
                                <div class="flex items-baseline gap-2 mb-2">
                                    <span class="text-4xl font-bold text-white">
                                        ${stock.currency} ${parseFloat(stock.price).toFixed(2)}
                                    </span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="font-semibold text-lg ${isPositive ? 'text-emerald-400' : 'text-red-400'}">
                                        ${isPositive ? '‚ñ≤' : '‚ñº'} 
                                        ${stock.change} (${stock.changePercent}%)
                                    </span>
                                </div>
                            </div>

                            <div class="border-t border-white/20 pt-4 space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span class="text-gray-300">Volume:</span>
                                    <span class="font-semibold text-white">${parseInt(stock.volume).toLocaleString()}</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-300">Last Update:</span>
                                    <span class="font-semibold text-emerald-400">${new Date(stock.timestamp).toLocaleTimeString()}</span>
                                </div>
                            </div>

                            ${isStrongBuy ? `
                                <div class="mt-4 p-3 bg-emerald-500/20 rounded-lg border border-emerald-500/30">
                                    <p class="text-xs text-emerald-300 font-semibold">üí° Strong upward momentum - Consider for portfolio</p>
                                </div>
                            ` : isStrongSell ? `
                                <div class="mt-4 p-3 bg-red-500/20 rounded-lg border border-red-500/30">
                                    <p class="text-xs text-red-300 font-semibold">‚ö†Ô∏è Declining trend - Exercise caution</p>
                                </div>
                            ` : ''}
                        </div>
                    `}).join('')}
                </div>

                ${stocks.length > 0 ? `
                    <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="bg-emerald-500/20 backdrop-blur-lg rounded-xl p-4 border border-emerald-500/30">
                            <div class="text-2xl mb-2">üá≥üá¨</div>
                            <div class="text-white font-bold text-lg">${stocks.filter(s => s.market === 'nigeria').length} Nigerian Stocks</div>
                            <div class="text-emerald-300 text-sm">NGX Exchange</div>
                        </div>
                        <div class="bg-blue-500/20 backdrop-blur-lg rounded-xl p-4 border border-blue-500/30">
                            <div class="text-2xl mb-2">üá∞üá™</div>
                            <div class="text-white font-bold text-lg">${stocks.filter(s => s.market === 'kenya').length} Kenyan Stocks</div>
                            <div class="text-blue-300 text-sm">NSE Exchange</div>
                        </div>
                        <div class="bg-purple-500/20 backdrop-blur-lg rounded-xl p-4 border border-purple-500/30">
                            <div class="text-2xl mb-2">üá∑üáº</div>
                            <div class="text-white font-bold text-lg">${stocks.filter(s => s.market === 'rwanda').length} Rwandan Stocks</div>
                            <div class="text-purple-300 text-sm">RSE Exchange</div>
                        </div>
                    </div>
                ` : ''}

                <div class="mt-6 bg-gradient-to-r from-emerald-500/20 to-blue-500/20 border border-emerald-500/30 rounded-2xl p-6 backdrop-blur-lg">
                    <div class="flex items-start gap-3">
                        <div class="text-3xl">‚ÑπÔ∏è</div>
                        <div class="text-sm text-white space-y-2">
                            <p class="font-bold text-lg">Live African Stock Market Platform</p>
                            <ul class="space-y-1">
                                <li>üìä Real-time data from Nigerian (NGX), Kenyan (NSE), and Rwandan (RSE) stock exchanges</li>
                                <li>ü§ñ AI-powered buy/sell signals based on price momentum and market trends</li>
                                <li>‚ö° Backend auto-refreshes data every 30 minutes</li>
                                <li>üîÑ Click refresh anytime for latest prices</li>
                                <li>üåç Covering emerging African markets with high growth potential</li>
                            </ul>
                            <p class="text-yellow-300 text-xs mt-3 font-semibold">
                                üìà Signal Guide: STRONG BUY (>2% gain) ‚Ä¢ BUY (positive) ‚Ä¢ HOLD (neutral) ‚Ä¢ SELL (<-2% loss)
                            </p>
                            <p class="text-gray-300 text-xs mt-3">
                                <strong>Disclaimer:</strong> This platform is for educational and informational purposes only. 
                                Not financial advice. Always conduct your own research and consult with a licensed financial 
                                advisor before making any investment decisions.
                            </p>
                        </div>
                    </div>
                </div>
            `;
        }

        // Initial load
        render();
        fetchStocks();
        
        // Auto-refresh every 5 minutes
        setInterval(fetchStocks, 5 * 60 * 1000);
    </script>
</body>
</html>
```
